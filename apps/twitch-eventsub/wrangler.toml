name = "twitch-eventsub"
main = "src/index.ts"
compatibility_date = "2025-10-23"

# Default vars (overridden by environment-specific configs)
[vars]
STREAMLING_STATE_URL = "http://localhost:8787"

# Local dev ports
[dev]
port = 8788

[observability]
enabled = true

# Preview environment (ephemeral, for CI/CD smoke tests)
[env.preview]
name = "twitch-eventsub-preview"
# STREAMLING_STATE_URL passed via --var in CI/CD

# Production environment
[env.prod]
name = "twitch-eventsub-prod"
# STREAMLING_STATE_URL passed via --var in CI/CD or set as wrangler secret
