name = "streamling-state"
main = "src/index.ts"
compatibility_date = "2025-10-23"

[durable_objects]
bindings = [{ name = "STREAMLING_STATE", class_name = "StreamlingState" }]

[[migrations]]
tag = "v1"
new_sqlite_classes = ["StreamlingState"]

# Local dev ports:
[dev]
port = 8787

[observability]
enabled = true

# Preview environment (ephemeral, for CI/CD smoke tests)
[env.preview]
name = "streamling-state-preview"
vars = { TWITCH_CLIENT_ID = "preview" }

# Production environment
[env.prod]
name = "streamling-state-prod"
# vars.TWITCH_CLIENT_ID set via wrangler secret or --var flag
# Secrets: wrangler secret put TWITCH_CLIENT_SECRET --env prod
